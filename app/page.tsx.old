'use client'; // Switch to Client Component for Auth check
import Link from 'next/link';
import { Mic2, ArrowRight, ShieldCheck } from 'lucide-react';
import LandingAnalytics from '@/components/LandingAnalytics';
import { useAuth } from '@/context/AuthContext';
import Image from 'next/image';

export default function LandingPage() {
  const { user } = useAuth();
  
  // Check if current user is VPE
  const isVPE = user?.email === process.env.NEXT_PUBLIC_VPE_EMAIL;

  return (
    <div className="flex flex-col min-h-screen bg-slate-50">
      
      {/* Navbar */}
      <nav className="p-6 flex justify-between items-center max-w-6xl mx-auto w-full">
        <div className="flex items-center gap-2 font-bold text-xl text-slate-900">
          <div className="bg-purple-600 text-white p-1 rounded-lg">
	  {/* <Mic2 size={20} /> */ }
          </div>
	    <div className="bg-white w-24 h-24 rounded-full flex items-center justify-center mx-auto mb-6 shadow-sm border border-slate-100 relative overflow-hidden">
          <Image
            src="/tm.jpeg"
            alt="Club Logo"
            fill
            className="object-contain p-1"
          />
        </div>
          TalkMagic ToastMasters 
        </div>
        
        <div className="flex items-center gap-4">
          {/* Conditionally Render VPE Console Link */}
          {isVPE && (
            <Link 
              href="/vpe" 
              className="hidden sm:flex items-center gap-2 text-xs font-bold text-purple-700 bg-purple-100 px-3 py-1 rounded-full hover:bg-purple-200 transition-colors"
            >
              <ShieldCheck size={14}/> VPE Console
            </Link>
          )}

          {user ? (
            <Link href="/dashboard" className="text-sm font-medium text-slate-600 hover:text-purple-600">
              Go to Dashboard
            </Link>
          ) : (
	  <Link href="/login" className="text-sm font-medium text-slate-600 hover:text-purple-600">
  		Login
	  </Link>
          )}
        </div>
      </nav>

      {/* Hero Section */}
      <main className="flex-1 flex flex-col items-center justify-center text-center px-4 max-w-6xl mx-auto space-y-12 py-12">
        
        <div className="space-y-6 max-w-4xl mx-auto">
          <h1 className="text-5xl md:text-6xl font-black text-slate-900 tracking-tight leading-tight">
            Master your speaking journey.
            <span className="block text-purple-600">One role at a time.</span>
          </h1>
          <p className="text-xl text-slate-500 max-w-2xl mx-auto">
            The intelligent way to book Toastmasters roles. 
            Get AI-driven suggestions and never miss a speaking slot again.
          </p>

          <div className="flex gap-4 justify-center pt-4">
            <Link 
              href="/dashboard"
              className="flex items-center justify-center gap-2 bg-slate-900 text-white px-8 py-4 rounded-xl font-bold text-lg hover:bg-slate-800 transition-all shadow-xl hover:shadow-2xl hover:-translate-y-1"
            >
              Reserve a Spot <ArrowRight size={20} />
            </Link>
          </div>
        </div>

        {/* NEW: Analytics Section */}
	{isVPE && (
        <div className="w-full">
          <div className="text-slate-400 text-xs font-bold uppercase tracking-widest mb-4">Club Highlights</div>
          <LandingAnalytics />
        </div>
	)}

      </main>

      {/* Footer */}
      <footer className="py-8 text-center text-slate-400 text-sm">
        <p>&copy; {new Date().getFullYear()} Toastmasters Club. All rights reserved.</p>
        
        {/* Mobile VPE Link (Backup) */}
        {isVPE && (
          <div className="mt-4 sm:hidden">
            <Link href="/vpe" className="text-purple-500 font-bold">
              Access VPE Console
            </Link>
          </div>
        )}
      </footer>
    </div>
  );
}
